"use strict";function orderTotalContext(n,t,i,r,u,f){function o(i){return n.$broadcast("orderTotalContextChanging",{initialLoad:i}),r.getOrderTotal().then(function(t){e=t.data;h.setState(e);n.$broadcast("orderTotalContextChanged",{initialLoad:i})},function(i){return e=f.getLastState(),n.$broadcast("orderTotalContextChanged"),t.reject(i)})}function c(){return e}function l(t){t.giftCardId&&n.$broadcast("removeGiftCard",{giftCardId:t.giftCardId})}var s={load:o,get:c,set:l},e,h=f.instance();return n.$on("resetOrderTotalData",function(){e=undefined;o()}),s}angular.module("realOnePageCheckout.orderTotal").factory("orderTotalContext",orderTotalContext);orderTotalContext.$inject=["$rootScope","$q","api","orderTotalService","objectUtility","stateHolder"];