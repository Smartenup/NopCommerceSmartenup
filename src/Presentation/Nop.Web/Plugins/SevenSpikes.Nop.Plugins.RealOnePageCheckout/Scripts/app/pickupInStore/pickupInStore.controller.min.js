"use strict";function PickupInStoreController(n,t,i){function f(){var n=r.pickUpInStoreModel;n&&(r.configData.isVisible&=n.allowPickUpInStore)}var r=this,u;r.pickupInStoreData={};r.configData={};r.configData.isVisible=!0;r.pickupInStoreModel={};r.selectedPickupPoint={};u=!1;n.$on("refresh",function(){var n=i.get();angular.copy(n,r.pickupInStoreData)});r.pickUpPointChanged=function(){if(u){var n=r.selectedPickupPoint.Id+"___"+r.selectedPickupPoint.ProviderSystemName;i.set(u,n)}};n.$on("pickupPointMarkerClicked",function(n,t){r.selectedPickupPoint=t.pickUpPoint;r.pickUpPointChanged()});n.$on("configurationReady",function(n,i){t.$evalAsync(function(){r.config=i;r.config.pickUpInStoreModel&&(r.pickUpInStoreModel=JSON.parse(r.config.pickUpInStoreModel),r.selectedPickupPoint=r.pickUpInStoreModel.pickupPoints[0]);f()})});n.$on("togglePanel",function(n,t){angular.isDefined(t.hasProductsRequiringShipping)&&(r.configData.isVisible=t.hasProductsRequiringShipping);t&&angular.isDefined(t.shipToSameAddress)&&(r.configData.isVisible=!t.shipToSameAddress);f()});t.$watch("vm.pickupInStoreData.pickupInStore",function(n){typeof n=="boolean"&&(u=n,i.set(u,r.selectedPickupPoint.Id+"___"+r.selectedPickupPoint.ProviderSystemName))},!0)}angular.module("realOnePageCheckout.pickupInStore").controller("PickupInStoreController",PickupInStoreController);PickupInStoreController.$inject=["$rootScope","$scope","pickupInStoreContext","dataConfig"];